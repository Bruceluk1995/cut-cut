# Project: TikTok视频混剪工具
# Date: 2024-03-26
# Author: Original development team
# Description: 这个文件用于指导Cursor的行为，确保不会遗忘或删除已开发的功能

## 核心功能清单（禁止删除）

### 1. GUI界面功能
- 文件夹选择区域
- 参数设置区域
- 视频列表区域
- 开始混剪按钮（黑色文字，绿色背景）
- 全选/取消全选按钮
- 状态显示标签

### 2. 视频处理功能
- 自动调整视频尺寸至TikTok标准分辨率(1080x1920)
- 智能背景模糊填充
- 随机选择视频片段
- 自动合并视频片段
- 多线程处理避免GUI卡顿

### 3. 音频处理功能
- 保留原始音频
- 仅保留人声（去除背景音乐）
- 完全去除音频
- 音效添加（片段开头/视频开头）

### 4. 配置管理
- JSON配置文件存储
- 自动加载上次设置
- UTF-8编码支持

## 开发规则

### 1. 代码修改规则
- 禁止删除核心功能
- 必须保持原有功能的完整性
- 可以优化但不能破坏现有功能
- 新功能必须向下兼容

### 2. GUI修改规则
- 保持主要布局结构
- 保持按钮功能完整
- 可以优化样式但不能删除组件
- 必须保持用户友好性

### 3. 处理流程规则
- 保持视频处理流程完整
- 保持音频处理选项
- 保持错误处理机制
- 保持多线程处理机制

### 4. 文件结构规则
- 保持主要文件结构
- 保持配置文件格式
- 保持文档完整性
- 保持依赖关系

## 关键文件路径（禁止删除）

### 1. 核心文件
- src/main.py
- src/config.json

### 2. 文档文件
- docs/implementation.md
- docs/快速指南.md

### 3. 配置文件
- requirements.txt
- .cursorrules

## 开发历史记录

### 2024-03-26
- 优化了开始混剪按钮样式
- 调整了按钮文字颜色为黑色
- 调整了按钮背景色为绿色
- 改进了按钮在界面中的位置
- 添加了自动文件名冲突处理功能
  - 自动检测文件名冲突
  - 智能序号递增
  - 确保不会覆盖已有文件
- 添加了打开输出文件夹功能
  - 在输出文件夹选择区域添加按钮
  - 支持快速打开输出目录
  - 包含文件夹存在性检查
- 添加了打开输入文件夹功能
  - 在输入文件夹选择区域添加按钮
  - 支持快速打开输入目录
  - 包含文件夹存在性检查
- 添加了自动随机背景音乐功能
  - 支持多个音乐池管理
  - 音乐池可选择和框选
  - 自动随机选择背景音乐
  - 音乐池文件夹快速打开
  - 音乐池列表显示和管理
  - 优化了音频处理流程，提高处理速度

## 注意事项

1. 在进行任何修改前，请仔细阅读本文件
2. 所有的改动都应该是累加的，而不是替换的
3. 如果需要重大改动，必须先确保现有功能的完整备份
4. 保持文档的同步更新

## 错误处理规则

1. 保持所有现有的错误处理机制
2. 可以添加新的错误处理，但不能删除现有的
3. 保持用户友好的错误提示
4. 保持日志记录功能

## 扩展规则

1. 新功能必须遵循现有的代码结构
2. 新功能必须添加相应的文档
3. 新功能必须包含错误处理
4. 新功能必须经过充分测试

## 维护规则

1. 定期检查功能完整性
2. 定期更新文档
3. 保持代码注释的完整性
4. 记录所有重要的修改 